// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Main from "./Main.mjs";
import * as Curry from "rescript/lib/es6/curry.js";
import * as React from "react";
import * as RelayEnv from "./RelayEnv.mjs";
import * as RelayRouter from "../router/RelayRouter.mjs";
import * as RelaySSRUtils from "../router/RelaySSRUtils.mjs";
import * as Server from "react-dom/server";
import * as RouteDeclarations from "./test/routes/__generated__/RouteDeclarations.mjs";

function getStream(url, options, onResponseReceived, onEmitPreloadAsset) {
  var environment = RelayEnv.makeServer(onResponseReceived);
  var routerEnvironment = RelayRouter.RouterEnvironment.makeServerEnvironment(url);
  var routes = RouteDeclarations.make(undefined, undefined);
  var match = RelayRouter.Router.make(routes, routerEnvironment, environment);
  return Server.renderToPipeableStream(React.createElement(RelaySSRUtils.AssetRegisterer.Provider.make, Curry._3(RelaySSRUtils.AssetRegisterer.Provider.makeProps, (function (asset) {
                        if (asset.TAG === /* Component */0) {
                          return onEmitPreloadAsset({
                                      type: "component",
                                      moduleName: asset.moduleName
                                    });
                        }
                        
                      }), React.createElement(Main.make, {
                          environment: environment,
                          routerContext: match[1]
                        }), undefined)), options);
}

export {
  getStream ,
  
}
/* Main Not a pure module */
